<script>
import {computed, defineComponent} from 'vue'

export default {
    props: ['user'],
    data : function () {
        return {
            search: "",
        }
    },
    methods: {
        logout() {
            this.emitter.emit('onLogout');
        },
        lk() {
            this.emitter.emit('onShowUser', this.user.id);
        },
        onSearchIcon() {
            var formContainer = document.getElementById('search-form');
            (formContainer.classList.contains("--open") ? formContainer.classList.remove("--open") : formContainer.classList.add("--open"));
        },
        onSearchSubmit() {
            var s = this.search;
            this.search = "";
            this.emitter.emit('onSearch', s)
        },
        onHeader() {
            this.$router.push('index')
        },
        addItem() {
            this.$router.push('add-post')
        },
        clicked() {
            this.emitter.emit('onDropClicked');
        }
    },
}
</script>

<template>
    <div>
        <header class="b-header">
            <div class="b-header-container container">
                <a href="/index" class="b-header-logo"></a>
                <div class="search-block">
                    <svg @click.prevent="onSearchIcon" xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 50 50" width="35px" height="35px"><path d="M 21 3 C 11.621094 3 4 10.621094 4 20 C 4 29.378906 11.621094 37 21 37 C 24.710938 37 28.140625 35.804688 30.9375 33.78125 L 44.09375 46.90625 L 46.90625 44.09375 L 33.90625 31.0625 C 36.460938 28.085938 38 24.222656 38 20 C 38 10.621094 30.378906 3 21 3 Z M 21 5 C 29.296875 5 36 11.703125 36 20 C 36 28.296875 29.296875 35 21 35 C 12.703125 35 6 28.296875 6 20 C 6 11.703125 12.703125 5 21 5 Z"/></svg>
                    <form @submit.prevent="onSearchSubmit" id="search-form">
                        <input v-model="search" class="search-input" placeholder="введте что-то..."/>
                        <button class="search-btn">Найти</button>
                    </form>
                </div>
                <nav class="b-header-nav">
                    <div class="b-header-nav-list">

                        <template v-if="!user">
                            <div class="b-header-nav-item">
                                <router-link to="/register">
                                    <button class="b-btn" id="btn-register">Регистрация</button>
                                </router-link>

                            </div>
                            <div class="b-header-nav-item">
                                <router-link to="/enter">
                                    <button class="b-btn" id="btn-login">Войти</button>
                                </router-link>
                            </div>
                        </template>

                        <template v-else>
                            <div class="b-header-nav-item">
                                <div class="ll" @click.prevent="lk">
                                    <svg class="profile" fill="#000000" height="64px" width="64px" version="1.1"
                                         id="Layer_1" xmlns="http://www.w3.org/2000/svg"
                                         xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 504.331 504.331"
                                         xml:space="preserve"><g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                                        <g id="SVGRepo_tracerCarrier" stroke-linecap="round"
                                           stroke-linejoin="round"></g>
                                        <g id="SVGRepo_iconCarrier"> <g transform="translate(0 -1)"> <g> <g> <circle
                                                cx="201.445" cy="183.608" r="8.393"></circle>
                                            <circle cx="302.166" cy="183.608" r="8.393"></circle>
                                            <path d="M501.219,195.113c-9.329-40.313-28.543-61.994-55.367-66.337c-17.546-2.841-36.581,1.929-56.154,11.904 c-5.504-11.782-14.474-24.072-27.866-35.121C336.675,84.804,301.01,73.34,253.442,74.58 c-46.788-1.232-82.827,10.054-108.914,30.499c-14.18,11.114-23.901,23.558-30.046,35.525 c-19.668-9.996-38.775-14.728-56.359-11.771c-26.649,4.482-45.727,26.151-55.009,66.279 c-6.745,29.162-2.505,59.228,12.456,83.707c21.328,34.905,55.38,46.509,101.135,23.461c15.95,24.623,46.837,38.73,86.331,45.323 l5.648,59.311c1.143,11.896,13.85,18.939,24.535,13.605c0.09-0.045,6.557,6.34,6.557,6.34c6.644,6.644,17.414,6.644,24.057,0 l6.303-6.303c10.941,5.299,23.663-1.75,24.79-13.646l5.642-59.24c39.43-6.588,70.329-20.806,86.424-45.688 c46.068,23.475,80.321,11.931,101.762-23.164C503.718,254.337,507.963,224.269,501.219,195.113z M474.431,270.065 c-17.97,29.415-44.799,37.322-86.495,13.335c-4.217-2.426-9.606-0.77-11.734,3.605c-10.969,22.557-37.803,36.555-73.981,43.329 l3.698-38.831c23.016-8.402,43.834-22.052,61.036-39.832c3.223-3.332,3.135-8.645-0.196-11.868 c-3.332-3.223-8.645-3.135-11.868,0.196c-13.546,14.001-29.56,25.137-47.184,32.74l2.817-29.58 c0.126-1.323-0.071-2.599-0.512-3.763c-0.159-0.42-0.349-0.826-0.572-1.212c-0.357-0.62-0.788-1.194-1.289-1.703 c-0.019-0.019-0.035-0.04-0.054-0.059c-0.531-0.53-1.137-0.985-1.797-1.36c-0.05-0.028-0.096-0.061-0.146-0.088 c-0.599-0.323-1.248-0.567-1.928-0.738c-0.41-0.103-0.828-0.187-1.261-0.228c-0.288-0.027-0.575-0.04-0.858-0.038 c-1.004,0.006-1.969,0.201-2.869,0.537c-0.371,0.139-0.735,0.294-1.08,0.483c-0.394,0.215-0.764,0.467-1.118,0.741 c-0.636,0.492-1.2,1.073-1.674,1.729c-0.268,0.371-0.506,0.765-0.711,1.18c-0.166,0.335-0.312,0.683-0.433,1.043 c-0.069,0.204-0.127,0.412-0.181,0.623c-0.103,0.41-0.187,0.828-0.228,1.261l-4.094,42.988c-0.004,0.042-0.009,0.084-0.012,0.127 l-11.489,120.641c-6.861-3.099-14.772-1.813-19.948,3.363l-6.303,6.303c-0.088,0.088-6.621-6.303-6.621-6.303 c-5.176-5.176-13.087-6.462-19.634-3.18c-0.131,0.065-15.909-163.939-15.909-163.939c-0.02-0.211-0.056-0.417-0.091-0.622 c-0.013-0.075-0.019-0.153-0.033-0.228c-0.088-0.443-0.219-0.867-0.373-1.28c-0.136-0.365-0.287-0.722-0.469-1.06 c-0.054-0.1-0.118-0.194-0.177-0.292c-0.219-0.369-0.458-0.725-0.729-1.054c-0.998-1.212-2.328-2.127-3.833-2.629 c-0.045-0.015-0.087-0.035-0.132-0.049c-0.721-0.227-1.483-0.352-2.266-0.374c-0.064-0.002-0.126-0.01-0.191-0.011 c-0.284-0.002-0.57,0.011-0.859,0.038c-0.169,0.016-0.332,0.047-0.498,0.073c-0.117,0.018-0.237,0.029-0.352,0.052 c-0.369,0.073-0.724,0.179-1.073,0.298c-0.439,0.15-0.866,0.327-1.267,0.544c-0.1,0.054-0.194,0.118-0.292,0.177 c-0.603,0.358-1.161,0.781-1.651,1.271c-0.057,0.057-0.106,0.119-0.161,0.177c-0.13,0.137-0.261,0.273-0.381,0.419 c-0.267,0.324-0.502,0.672-0.719,1.033c-0.061,0.101-0.127,0.198-0.183,0.301c-0.017,0.031-0.029,0.064-0.046,0.095 c-0.11,0.207-0.215,0.417-0.307,0.634c-0.026,0.06-0.044,0.123-0.068,0.184c-0.177,0.443-0.323,0.9-0.422,1.374 c-0.098,0.467-0.148,0.948-0.165,1.437c-0.003,0.076-0.012,0.15-0.013,0.225c-0.002,0.284,0.011,0.57,0.038,0.859l0.069,0.722 l2.747,28.853c-17.622-7.604-33.644-18.741-47.183-32.73c-3.224-3.331-8.538-3.418-11.869-0.194 c-3.331,3.224-3.417,8.538-0.194,11.869c17.194,17.764,38.024,31.418,61.032,39.821l3.691,38.768 c-36.258-6.774-63.093-20.67-73.857-42.92c-2.115-4.373-7.49-6.042-11.711-3.638c-41.371,23.57-68.044,15.612-85.921-13.644 c-12.601-20.617-16.206-46.178-10.425-71.17c7.871-34.026,22.17-50.268,41.438-53.508c15.336-2.579,33.874,2.977,53.34,14.179 c4.471,2.573,10.184,0.542,12.027-4.277c4.517-11.814,13.563-25.205,28.61-36.998c22.936-17.976,55.146-28.063,98.558-26.931 c44.075-1.138,75.775,9.051,97.708,27.146c14.278,11.78,22.483,25.074,26.277,36.678c1.659,5.074,7.57,7.331,12.188,4.653 c19.51-11.312,38.131-16.989,53.555-14.492c19.4,3.141,33.786,19.374,41.695,53.55 C490.643,223.882,487.034,249.445,474.431,270.065z"></path>
                                            <path d="M95.178,169.98c0.646-4.162-1.893-8.159-5.935-9.342c-4.95-1.449-9.546-2.21-13.698-2.21 c-0.141-0.001-0.141-0.001-0.386-0.004c-3.792-0.047-6.6,0.368-10.17,2.18c-4.582,2.326-8.573,6.477-12.001,12.635 c-3.399,6.105-6.317,14.303-8.771,24.932c-4.963,21.521-1.655,42.926,9.427,60.169c8.646,13.454,16.359,17.595,26.047,17.595 c3.018,0,6.384-0.427,10.114-1.341c4.223-1.035,6.957-5.124,6.299-9.422C90.914,231.258,90.485,200.22,95.178,169.98z M67.766,249.265c-8.571-13.336-11.162-30.102-7.192-47.319c2.124-9.202,4.529-15.957,7.081-20.541 c3.12-5.605,4.353-6.231,7.294-6.194c0.267,0.003,0.267,0.003,0.595,0.005c0.605,0,1.249,0.032,1.931,0.095 c-3.414,26.896-3.06,54.417,0.806,83.771C75.044,258.728,72.622,256.822,67.766,249.265z"></path>
                                            <path d="M450.624,173.248c-3.428-6.158-7.419-10.309-12.001-12.635c-3.57-1.812-6.378-2.227-10.17-2.18 c-0.245,0.003-0.245,0.003-0.386,0.004c-4.152,0-8.749,0.761-13.698,2.21c-4.042,1.184-6.581,5.18-5.935,9.342 c4.693,30.239,4.263,61.278-0.926,95.193c-0.658,4.298,2.076,8.387,6.299,9.422c3.73,0.914,7.096,1.341,10.114,1.341 c9.688,0,17.4-4.141,26.047-17.596c11.082-17.242,14.39-38.647,9.427-60.167C456.941,187.551,454.022,179.353,450.624,173.248z M435.846,249.273c-4.857,7.557-7.278,9.463-10.515,9.816c3.866-29.354,4.22-56.875,0.806-83.771 c0.681-0.063,1.326-0.095,1.931-0.095c0.329-0.002,0.329-0.002,0.595-0.005c2.941-0.037,4.173,0.589,7.294,6.194 c2.552,4.584,4.957,11.34,7.082,20.543C447.008,219.171,444.417,235.937,435.846,249.273z"></path> </g> </g> </g> </g></svg>
                                </div>
                            </div>
                            <div class="b-header-nav-item">
                                <router-link :to="{ name: 'add-post'}">
                                    <button class="b-btn" id="btn-register">Добавть изделие</button>
                                </router-link>
                            </div>
                            <div class="b-header-nav-item">

                                <button @click.prevent="logout" class="b-btn" id="btn-login">Выйти</button>

                            </div>
                        </template>
                    </div>
                </nav>
            </div>
        </header>
    </div>
</template>

<style scoped>
.ll {
    //cursor: pointer;
}
</style>